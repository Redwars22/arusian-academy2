---
sidebar_position: 4
---

# üéÆ Guess the Meaning Game

This is a game where you are given a contextual image and an Arusian sentence.
You should try to translate it in English. It is a good way practice your Arusian!

import { useState, useEffect } from "react";
import { FontRenderer } from "../../src/components/FontRenderer";

export const TranslationGame = () => {
  const [currentImage, setCurrentImage] = useState(null); // Initialize as null
  const [progress, setProgress] = useState(0); // Start at 0 for initial display
  const [lives, setLives] = useState(3);
  const [points, setPoints] = useState(0);
  const [images, setImages] = useState([]);
  const [answer, setAnswer] = useState("");

  const advance = () => {
    if (!currentImage) return; // Guard clause if currentImage is not set yet

    // Check if the answer is one of the right answers (case-insensitive)
    if (
      currentImage.rightAnswers.some(
        (ans) => ans.toLowerCase() === answer.toLowerCase()
      )
    ) {
      setPoints(points + Math.round(Math.random() * 100));
      setProgress(progress + 1);
      setAnswer(""); // Clear input on correct answer
      getCurrImage(); // Load next image
    } else {
      setLives(lives - 1);
    }
  };

  const restart = () => {
    setProgress(0);
    setLives(3);
    setPoints(0);
    setAnswer("");
    getCurrImage(); // Load a new image for restart
  };

  const resetLives = () => {
    setLives(3);
    setProgress(0);
    setPoints(0);
    setAnswer("");
    getCurrImage(); // Load a new image for retry
  };

  const getCurrImage = () => {
    if (images.length === 0) return; // Don't try to get an image if none are loaded

    let index = Math.floor(Math.random() * images.length); // Use floor for correct index
    setCurrentImage({
      name: images[index].name,
      rightAnswers: images[index].possible_answers,
      points: images[index].points || 0, // Assuming points might be in your data
    });
  };

  useEffect(() => {
    async function loadImages() {
      try {
        const req = await fetch(
          "https://thearusianlanguage.vercel.app/semlek_game.json"
        );
        const data = await req.json();
        setImages(data);
      } catch (error) {
        console.error("Failed to load images:", error);
      }
    }

    loadImages();
  }, []); // Run once on component mount

  useEffect(() => {
    if (images.length > 0 && !currentImage) {
      getCurrImage(); // Set the first image once images are loaded
    }
  }, [images, currentImage]); // Re-run when images are loaded or currentImage is null

  // Estilos alinhados ao tema global (roxo principal, azul para stats e barra)
  const cardStyle = {
    backgroundColor: "var(--ifm-background-color, #fff)",
    borderRadius: "12px",
    boxShadow: "0 8px 24px rgba(0, 0, 0, 0.08)",
    maxWidth: "500px",
    width: "100%",
    margin: "32px auto",
    overflow: "hidden",
    fontFamily: "var(--ifm-font-family-base, Inter, sans-serif)",
    border: "1px solid var(--ifm-color-emphasis-200, #eaeaea)",
  };

  const cardHeaderStyle = {
    backgroundColor: "var(--ifm-color-primary, #794cbd)", // Roxo principal
    color: "var(--ifm-font-color-base-inverse, #fff)",
    padding: "16px 24px",
    display: "flex",
    alignItems: "center",
    justifyContent: "space-between",
    borderBottom: "1px solid var(--ifm-color-emphasis-200, #eaeaea)",
    borderTopLeftRadius: "12px",
    borderTopRightRadius: "12px",
  };

  const progressContainerStyle = {
    flexGrow: 1,
    height: "10px",
    backgroundColor: "rgba(255,255,255,0.3)",
    borderRadius: "5px",
    overflow: "hidden",
    marginRight: "15px",
  };

  const progressBarFillStyle = {
    height: "100%",
    backgroundColor: " #3392fd", // Azul para barra de progresso
    borderRadius: "5px",
    transition: "width 0.3s",
    width: `${(progress / 10) * 100}%`, // Calculate percentage based on 10 steps
  };

  const scoreTextStyle = {
    fontWeight: "bold",
    fontSize: "1.1em",
    verticalAlign: "middle",
  };

  const pointsTextStyle = {
    color: " #3392fd", // Azul para pontos
    ...scoreTextStyle,
  };

  const livesTextStyle = {
    color: " #3392fd", // Azul para vidas
    ...scoreTextStyle,
  };

  const cardBodyStyle = {
    padding: "32px 24px",
    textAlign: "center",
  };

  const h2Style = {
    color: "var(--ifm-color-primary, #794cbd)", // Roxo principal para t√≠tulos
    marginBottom: "25px",
    fontSize: "1.7em",
    fontWeight: 700,
    fontFamily: "var(--ifm-font-family-base, Inter, sans-serif)",
  };

  const fontRendererContainerStyle = {
    marginBottom: "30px",
    minHeight: "100px",
    display: "flex",
    justifyContent: "center",
    alignItems: "center",
  };

  const inputButtonContainerStyle = {
    display: "flex",
    gap: "10px",
    marginTop: "20px",
  };

  const inputStyle = {
    flexGrow: 1,
    padding: "12px 15px",
    border: "2px solid var(--ifm-color-emphasis-200, #ddd)",
    borderRadius: "8px",
    fontSize: "1.1em",
    outline: "none",
    fontFamily: "inherit",
    background: "var(--ifm-background-color, #fff)",
    color: "var(--ifm-font-color-base, #222)",
  };

  const buttonStyle = {
    padding: "12px 25px",
    border: "none",
    borderRadius: "8px",
    fontSize: "1.1em",
    cursor: "pointer",
    fontWeight: 600,
    textTransform: "uppercase",
    backgroundColor: "var(--ifm-color-primary, #794cbd)", // Roxo principal para bot√µes
    color: "var(--ifm-font-color-base-inverse, #fff)",
    transition: "background 0.2s",
  };

  const iconStyle = {
    verticalAlign: "middle",
    marginLeft: "5px",
    color: " #3392fd", // Azul para √≠cones de stats
  };

  const trophyIconStyle = {
    fontSize: "100px",
    color: "var(--ifm-color-primary, #794cbd)", // Roxo principal para trof√©u
    marginBottom: "20px",
    verticalAlign: "middle",
  };

  return (
    <div style={cardStyle}>
      <div style={cardHeaderStyle}>
        <div style={progressContainerStyle} role="progressbar">
          <div style={progressBarFillStyle}></div>
        </div>
        <div style={{ marginLeft: "auto" }}>
          <span style={pointsTextStyle}>
            {points} <i className="bi bi-coin" style={iconStyle}></i>
          </span>
          <span> ‚Ä¢ </span>
          <span style={livesTextStyle}>
            {lives} <i className="bi bi-heart" style={iconStyle}></i>
          </span>
        </div>
      </div>
      {lives > 0 && progress < 10 && (
        <div style={cardBodyStyle}>
          <h2 style={h2Style}>What do you think it means?</h2>
          <div style={fontRendererContainerStyle}>
            {currentImage ? (
              <img height="350px" src={`/img/game/${currentImage.name}`} />
            ) : (
              <p>Loading image...</p> // Display loading message
            )}
          </div>
          <div style={inputButtonContainerStyle}>
            <input
              type="text"
              style={inputStyle}
              placeholder="Type your answer here"
              value={answer}
              onChange={(e) => setAnswer(e?.target?.value)}
            />
            <button style={buttonStyle} onClick={advance}>
              CHECK
            </button>
          </div>
        </div>
      )}
      {lives === 0 && (
        <div style={cardBodyStyle}>
          <h2 style={h2Style}>You ran out of hearts!</h2>
          <button style={buttonStyle} onClick={resetLives}>
            TRY AGAIN
          </button>
        </div>
      )}
      {progress >= 10 && (
        <div style={cardBodyStyle}>
          <i className="bi bi-trophy" style={trophyIconStyle}></i>
          <h2 style={h2Style}>You won the game!</h2>
          <button style={buttonStyle} onClick={restart}>
            RESTART
          </button>
        </div>
      )}
    </div>
  );
};

<TranslationGame/>

Coming soon!